{"version":3,"file":"Form.jsx","sourceRoot":"","sources":["Form.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { useState, ReactNode } from \"react\";\r\nimport \"./Form.css\";\r\nimport { Button, ButtonSet } from \"../Button\";\r\nimport { InteractiveProps } from \"../types/interactive\";\r\n\r\ntype FormValues = {\r\n  [key: string]: any;\r\n};\r\n\r\nexport interface FormProps extends InteractiveProps {\r\n  onSubmit: (formValues: FormValues) => any;\r\n  onCancel?: (...params: any) => any;\r\n  onSuccess?: (...params: any) => any;\r\n  onFailure?: (...params: any) => any;\r\n  submissionError?: string | null;\r\n  cancelLabel?: string;\r\n  submitLabel: string;\r\n  children: ReactNode;\r\n  isLoading?: boolean;\r\n  successMessage?: string;\r\n  isDestructive?: boolean;\r\n  formValues: FormValues;\r\n  disabled?: boolean;\r\n}\r\n\r\n\r\nconst Form: React.FC<FormProps> = (props) => {\r\n  const {\r\n    children,\r\n    id = \"\",\r\n    onSubmit = () => {},\r\n    onFailure = () => {},\r\n    onSuccess = () => {},\r\n    formValues,\r\n    submissionError = \"\",\r\n    successMessage = \"\",\r\n    submitLabel = \"Submit\",\r\n    cancelLabel = \"\",\r\n    isDestructive = false,\r\n    disabled = false,\r\n    onCancel  = () => {},\r\n  } = props;\r\n\r\n  const [isLoading, setIsLoading] = useState<boolean>(false);\r\n\r\n  async function handleSubmit(e: React.FormEvent<HTMLFormElement>) {\r\n    e.preventDefault();\r\n    const form = document.querySelector(`#form_content-${id}`);\r\n    let errorCount = form ? form.getElementsByClassName(\"Error\").length : 0;\r\n    if (errorCount === 0) {\r\n      try {\r\n        setIsLoading(true);\r\n        await onSubmit(formValues);\r\n        onSuccess && onSuccess(formValues);\r\n        setIsLoading(false);\r\n      } catch (err) {\r\n        onFailure && onFailure(err);\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form id={id} className=\"form\" noValidate onSubmit={handleSubmit}>\r\n      <div id={`form_content-${id}`}>{children}</div>\r\n      <div aria-live=\"assertive\" id=\"form-feedback\">\r\n        {submissionError && !isLoading ? (\r\n          <p className=\"form-feedback Error\">{submissionError}</p>\r\n        ) : null}\r\n        {successMessage ? (\r\n          <p className=\"form-feedback\">{successMessage}</p>\r\n        ) : null}\r\n      </div>\r\n      {cancelLabel ? (\r\n        <ButtonSet>\r\n          <Button loading={isLoading} onClick={onCancel} id={`cancel-${id}`}>\r\n            {cancelLabel}\r\n          </Button>\r\n\r\n          <Button\r\n            loading={isLoading}\r\n            look={!!isDestructive ? \"warning\" : \"primary\" }\r\n            type=\"submit\"\r\n            id={`submit-${id}`}\r\n          >\r\n            {submitLabel}\r\n          </Button>\r\n        </ButtonSet>\r\n      ) : (\r\n        <Button\r\n          id={`${id}-form-submit`}\r\n          type=\"submit\"\r\n          look={!!isDestructive ? \"warning\" : \"primary\" }\r\n          loading={isLoading}\r\n          disabled={disabled}\r\n        >\r\n          {submitLabel}\r\n        </Button>\r\n      )}\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default Form;\r\n"]}